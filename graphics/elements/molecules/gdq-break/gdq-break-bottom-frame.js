import * as tslib_1 from "/bundles/gdqx18-layouts/node_modules/tslib/tslib.es6.js";
import { TweenLite, Power1, TimelineMax } from "/bundles/gdqx18-layouts/node_modules/gsap/index.js";
const {
  customElement
} = Polymer.decorators;
const FADE_DURATION = 0.334;
const FADE_OUT_EASE = Power1.easeIn;
const FADE_IN_EASE = Power1.easeOut;
const currentHost = nodecg.Replicant('currentHost');
const nowPlaying = nodecg.Replicant('nowPlaying');
const LOGO_FADE_INTERVAL = 20;
const LOGO_FADE_DURATION = 1;
const LOGO_FADE_OUT_EASE = Power1.easeIn;
const LOGO_FADE_IN_EASE = Power1.easeOut;
/**
 * @customElement
 * @polymer
 */

let GdqBreakBottomFrame = class GdqBreakBottomFrame extends Polymer.Element {
  ready() {
    super.ready();
    currentHost.on('change', newVal => {
      this._changeText(this.$['host-text'], newVal);
    });
    nowPlaying.on('change', newVal => {
      this._changeText(this.$['music-text'], `${newVal.game || '?'} - ${newVal.title || '?'}`);
    }); // Logo anim

    const logoTL = new TimelineMax({
      repeat: -1
    });
    logoTL.to(this.$.gdqLogo, LOGO_FADE_DURATION, {
      opacity: 1,
      ease: LOGO_FADE_IN_EASE
    });
    logoTL.to(this.$.gdqLogo, LOGO_FADE_DURATION, {
      opacity: 0,
      ease: LOGO_FADE_OUT_EASE
    }, `+=${LOGO_FADE_INTERVAL}`);
    logoTL.to(this.$.charityLogo, LOGO_FADE_DURATION, {
      opacity: 1,
      ease: LOGO_FADE_IN_EASE
    });
    logoTL.to(this.$.charityLogo, LOGO_FADE_DURATION, {
      opacity: 0,
      ease: LOGO_FADE_OUT_EASE
    }, `+=${LOGO_FADE_INTERVAL}`);
  }

  _changeText(element, newText) {
    TweenLite.to(element, FADE_DURATION, {
      opacity: 0,
      ease: FADE_OUT_EASE,
      callbackScope: this,

      onComplete() {
        element.text = newText;
        TweenLite.to(element, FADE_DURATION, {
          opacity: 1,
          ease: FADE_IN_EASE,
          delay: 0.05
        });
      }

    });
  }

};
GdqBreakBottomFrame = tslib_1.__decorate([customElement('gdq-break-bottom-frame')], GdqBreakBottomFrame);
export default GdqBreakBottomFrame;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdkcS1icmVhay1ib3R0b20tZnJhbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLFNBQVEsU0FBUixFQUFtQixNQUFuQixFQUEyQixXQUEzQixRQUE2QyxvREFBN0M7QUFJQSxNQUFNO0FBQUMsRUFBQTtBQUFELElBQWtCLE9BQU8sQ0FBQyxVQUFoQztBQUVBLE1BQU0sYUFBYSxHQUFHLEtBQXRCO0FBQ0EsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQTdCO0FBQ0EsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE9BQTVCO0FBRUEsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFNBQVAsQ0FBOEIsYUFBOUIsQ0FBcEI7QUFDQSxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsU0FBUCxDQUE2QixZQUE3QixDQUFuQjtBQUVBLE1BQU0sa0JBQWtCLEdBQUcsRUFBM0I7QUFDQSxNQUFNLGtCQUFrQixHQUFHLENBQTNCO0FBQ0EsTUFBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsTUFBbEM7QUFDQSxNQUFNLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxPQUFqQztBQUVBOzs7OztBQUtBLElBQXFCLG1CQUFtQixHQUF4QyxNQUFxQixtQkFBckIsU0FBaUQsT0FBTyxDQUFDLE9BQXpELENBQWdFO0FBQy9ELEVBQUEsS0FBSyxHQUFBO0FBQ0osVUFBTSxLQUFOO0FBRUEsSUFBQSxXQUFXLENBQUMsRUFBWixDQUFlLFFBQWYsRUFBeUIsTUFBTSxJQUFHO0FBQ2pDLFdBQUssV0FBTCxDQUFpQixLQUFLLENBQUwsQ0FBTyxXQUFQLENBQWpCLEVBQXFELE1BQXJEO0FBQ0EsS0FGRDtBQUlBLElBQUEsVUFBVSxDQUFDLEVBQVgsQ0FBYyxRQUFkLEVBQXdCLE1BQU0sSUFBRztBQUNoQyxXQUFLLFdBQUwsQ0FBaUIsS0FBSyxDQUFMLENBQU8sWUFBUCxDQUFqQixFQUFzRCxHQUFHLE1BQU0sQ0FBQyxJQUFQLElBQWUsR0FBRyxNQUFNLE1BQU0sQ0FBQyxLQUFQLElBQWdCLEdBQUcsRUFBcEc7QUFDQSxLQUZELEVBUEksQ0FXSjs7QUFDQSxVQUFNLE1BQU0sR0FBRyxJQUFJLFdBQUosQ0FBZ0I7QUFBQyxNQUFBLE1BQU0sRUFBRSxDQUFDO0FBQVYsS0FBaEIsQ0FBZjtBQUVBLElBQUEsTUFBTSxDQUFDLEVBQVAsQ0FBVSxLQUFLLENBQUwsQ0FBTyxPQUFqQixFQUEwQixrQkFBMUIsRUFBOEM7QUFDN0MsTUFBQSxPQUFPLEVBQUUsQ0FEb0M7QUFFN0MsTUFBQSxJQUFJLEVBQUU7QUFGdUMsS0FBOUM7QUFLQSxJQUFBLE1BQU0sQ0FBQyxFQUFQLENBQVUsS0FBSyxDQUFMLENBQU8sT0FBakIsRUFBMEIsa0JBQTFCLEVBQThDO0FBQzdDLE1BQUEsT0FBTyxFQUFFLENBRG9DO0FBRTdDLE1BQUEsSUFBSSxFQUFFO0FBRnVDLEtBQTlDLEVBR0csS0FBSyxrQkFBa0IsRUFIMUI7QUFLQSxJQUFBLE1BQU0sQ0FBQyxFQUFQLENBQVUsS0FBSyxDQUFMLENBQU8sV0FBakIsRUFBOEIsa0JBQTlCLEVBQWtEO0FBQ2pELE1BQUEsT0FBTyxFQUFFLENBRHdDO0FBRWpELE1BQUEsSUFBSSxFQUFFO0FBRjJDLEtBQWxEO0FBS0EsSUFBQSxNQUFNLENBQUMsRUFBUCxDQUFVLEtBQUssQ0FBTCxDQUFPLFdBQWpCLEVBQThCLGtCQUE5QixFQUFrRDtBQUNqRCxNQUFBLE9BQU8sRUFBRSxDQUR3QztBQUVqRCxNQUFBLElBQUksRUFBRTtBQUYyQyxLQUFsRCxFQUdHLEtBQUssa0JBQWtCLEVBSDFCO0FBSUE7O0FBRUQsRUFBQSxXQUFXLENBQUMsT0FBRCxFQUF1QixPQUF2QixFQUFzQztBQUNoRCxJQUFBLFNBQVMsQ0FBQyxFQUFWLENBQWEsT0FBYixFQUFzQixhQUF0QixFQUFxQztBQUNwQyxNQUFBLE9BQU8sRUFBRSxDQUQyQjtBQUVwQyxNQUFBLElBQUksRUFBRSxhQUY4QjtBQUdwQyxNQUFBLGFBQWEsRUFBRSxJQUhxQjs7QUFJcEMsTUFBQSxVQUFVLEdBQUE7QUFDUixRQUFBLE9BQWUsQ0FBQyxJQUFoQixHQUF1QixPQUF2QjtBQUNELFFBQUEsU0FBUyxDQUFDLEVBQVYsQ0FBYSxPQUFiLEVBQXNCLGFBQXRCLEVBQXFDO0FBQ3BDLFVBQUEsT0FBTyxFQUFFLENBRDJCO0FBRXBDLFVBQUEsSUFBSSxFQUFFLFlBRjhCO0FBR3BDLFVBQUEsS0FBSyxFQUFFO0FBSDZCLFNBQXJDO0FBS0E7O0FBWG1DLEtBQXJDO0FBYUE7O0FBbEQ4RCxDQUFoRTtBQUFxQixtQkFBbUIsR0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBRHZDLGFBQWEsQ0FBQyx3QkFBRCxDQUMwQixDQUFBLEVBQW5CLG1CQUFtQixDQUFuQjtlQUFBLG1CIiwic291cmNlUm9vdCI6IiJ9